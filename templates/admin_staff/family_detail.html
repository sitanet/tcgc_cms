{% extends "admin_staff/base.html" %}
{% load static %}

{% block content %}
<div class="container-fluid mt-5">
    <div class="row">
        <div class="col-md-12">
            <div class="card mb-3 shadow-lg">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h2>{{ family.family_name }}'s Details</h2>
                    <div>
                        <a href="{% url 'list_family' %}" class="btn btn-secondary">Back to Family List</a>
                        <!-- <a href="" class="btn btn-light">Edit Family</a> -->
                        <form action="{% url 'delete_family' family.id %}" method="post" class="d-inline-block" onsubmit="return confirm('Are you sure you want to delete this family?');">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger">Delete Family</button>
                        </form>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 text-center">
                            <h4>Husband</h4>
                            <img src="{{ family.husband.image.url }}" class="img-fluid rounded mb-3" alt="Husband's Profile Picture" onerror="this.src='{% static 'images/avatar.jpg' %}'">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><strong>First Name:</strong> {{ family.husband.first_name }}</li>
                                <li class="list-group-item"><strong>Last Name:</strong> {{ family.husband.last_name }}</li>
                                <li class="list-group-item"><strong>Gender:</strong> {{ family.husband.get_gender_display }}</li>
                                <li class="list-group-item"><strong>Phone No:</strong> {{ family.husband.phone_no }}</li>
                                <li class="list-group-item"><strong>Email:</strong> {{ family.husband.email }}</li>
                            </ul>
                        </div>
                        <div class="col-md-6 text-center">
                            <h4>Wife</h4>
                            <img src="{{ family.wife.image.url }}" class="img-fluid rounded mb-3" alt="Wife's Profile Picture" onerror="this.src='{% static 'images/avatar.jpg' %}'">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><strong>First Name:</strong> {{ family.wife.first_name }}</li>
                                <li class="list-group-item"><strong>Last Name:</strong> {{ family.wife.last_name }}</li>
                                <li class="list-group-item"><strong>Gender:</strong> {{ family.wife.get_gender_display }}</li>
                                <li class="list-group-item"><strong>Phone No:</strong> {{ family.wife.phone_no }}</li>
                                <li class="list-group-item"><strong>Email:</strong> {{ family.wife.email }}</li>
                            </ul>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <h4>Family Information</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><strong>Family Name:</strong> {{ family.family_name }}</li>
                                <li class="list-group-item"><strong>Team Lead:</strong> {{ family.team_lead }}</li>
                                <li class="list-group-item"><strong>Team Member:</strong> {{ family.team_member }}</li>
                                <li class="list-group-item"><strong>Address:</strong> {{ family.address }}</li>
                            </ul>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <h4>Children</h4>
                            <ul class="list-group list-group-flush">
                                {% for child in children %}
                                    <li class="list-group-item"><strong>Name:</strong> {{ child.name }} | <strong>Age:</strong> {{ child.age }}</li>
                                {% empty %}
                                    <li class="list-group-item">No children listed for this family.</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <!-- <div class="row mt-4">
                        <div class="col-md-12">
                            <h4>Additional Details</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><strong>About Husband:</strong> {{ family.husband.about }}</li>
                                <li class="list-group-item"><strong>About Wife:</strong> {{ family.wife.about }}</li>
                            </ul>
                        </div>
                    </div> -->
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <h4>Emergency Contact</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><strong>Husband's Emergency Phone No:</strong> {{ family.husband.kin_phone_no }}</li>
                                <li class="list-group-item"><strong>Wife's Emergency Phone No:</strong> {{ family.wife.kin_phone_no }}</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
